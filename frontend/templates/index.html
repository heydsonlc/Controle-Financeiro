<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Controle Financeiro</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <!-- Chart.js para grÃ¡ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ’° Dashboard Financeiro</h1>
            <p class="subtitle" id="mes-atual">Carregando...</p>
        </header>

        <main>
            <!-- ========================================== -->
            <!-- BLOCO 1: RESUMO FINANCEIRO DO MÃŠS         -->
            <!-- ========================================== -->
            <section class="resumo-mes">
                <div class="resumo-card receitas" onclick="window.location.href='/receitas'">
                    <div class="resumo-icon">ğŸ“ˆ</div>
                    <div class="resumo-info">
                        <h3>Receitas do MÃªs</h3>
                        <p class="resumo-valor" id="receitas-mes">R$ 0,00</p>
                    </div>
                </div>

                <div class="resumo-card despesas" onclick="window.location.href='/despesas'">
                    <div class="resumo-icon">ğŸ“‰</div>
                    <div class="resumo-info">
                        <h3>Despesas do MÃªs</h3>
                        <p class="resumo-valor" id="despesas-mes">R$ 0,00</p>
                    </div>
                </div>

                <div class="resumo-card saldo-liquido">
                    <div class="resumo-icon">ğŸ’µ</div>
                    <div class="resumo-info">
                        <h3>Saldo LÃ­quido</h3>
                        <p class="resumo-valor" id="saldo-liquido">R$ 0,00</p>
                    </div>
                </div>

                <div class="resumo-card contas-bancarias" onclick="window.location.href='/contas-bancarias'">
                    <div class="resumo-icon">ğŸ¦</div>
                    <div class="resumo-info">
                        <h3>Saldo nas Contas</h3>
                        <p class="resumo-valor" id="saldo-contas">R$ 0,00</p>
                    </div>
                </div>
            </section>

            <!-- ========================================== -->
            <!-- BLOCO 2: INDICADORES INTELIGENTES         -->
            <!-- ========================================== -->
            <section class="indicadores">
                <h2 class="section-title">ğŸ“Š Indicadores e Insights</h2>
                <div class="indicadores-grid" id="indicadores-container">
                    <div class="loading-indicator">Carregando indicadores...</div>
                </div>
            </section>

            <!-- ========================================== -->
            <!-- BLOCO 3: GRÃFICOS                         -->
            <!-- ========================================== -->
            <section class="graficos">
                <h2 class="section-title">ğŸ“ˆ AnÃ¡lise Visual</h2>

                <div class="graficos-grid">
                    <!-- GrÃ¡fico de Pizza: Despesas por Categoria -->
                    <div class="grafico-card">
                        <h3>DistribuiÃ§Ã£o por Categoria</h3>
                        <div class="grafico-wrapper">
                            <canvas id="grafico-categorias"></canvas>
                        </div>
                    </div>

                    <!-- GrÃ¡fico de Barras: EvoluÃ§Ã£o de Gastos -->
                    <div class="grafico-card">
                        <h3>EvoluÃ§Ã£o de Gastos (6 meses)</h3>
                        <div class="grafico-wrapper">
                            <canvas id="grafico-evolucao"></canvas>
                        </div>
                    </div>

                    <!-- GrÃ¡fico de Linha: Saldo BancÃ¡rio -->
                    <div class="grafico-card wide">
                        <h3>EvoluÃ§Ã£o do Saldo BancÃ¡rio</h3>
                        <div class="grafico-wrapper">
                            <canvas id="grafico-saldo"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ========================================== -->
            <!-- BLOCO 4: ALERTAS E AGENDA FINANCEIRA      -->
            <!-- ========================================== -->
            <section class="alertas">
                <h2 class="section-title">ğŸ”” Alertas e Agenda Financeira</h2>

                <div class="alertas-grid">
                    <!-- Contas a Vencer -->
                    <div class="alerta-card">
                        <h3>ğŸ“… Contas a Vencer (7 dias)</h3>
                        <div class="alerta-lista" id="contas-vencer">
                            <p class="loading">Carregando...</p>
                        </div>
                    </div>

                    <!-- Faturas de CartÃ£o -->
                    <div class="alerta-card">
                        <h3>ğŸ’³ Faturas de CartÃ£o</h3>
                        <div class="alerta-lista" id="cartoes-vencer">
                            <p class="loading">Carregando...</p>
                        </div>
                    </div>

                    <!-- Financiamentos -->
                    <div class="alerta-card">
                        <h3>ğŸ  Financiamentos Ativos</h3>
                        <div class="alerta-lista" id="financiamentos-mes">
                            <p class="loading">Carregando...</p>
                        </div>
                    </div>

                    <!-- Receitas Previstas -->
                    <div class="alerta-card">
                        <h3>ğŸ’° Receitas Previstas</h3>
                        <div class="alerta-lista" id="receitas-previstas">
                            <p class="loading">Carregando...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- EspaÃ§o para bottom navigation -->
            <div style="height: 30px;"></div>
        </main>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="bottom-nav-container">
            <a href="/" class="nav-item active">
                <span class="icon">âŒ‚</span>
                <span class="label">Dashboard</span>
            </a>
            <a href="/lancamentos" class="nav-item">
                <span class="icon">âœ</span>
                <span class="label">LanÃ§amentos</span>
            </a>
            <a href="/despesas" class="nav-item">
                <span class="icon">â–¬</span>
                <span class="label">DESPESAS</span>
            </a>
            <a href="/cartoes" class="nav-item">
                <span class="icon">â–­</span>
                <span class="label">CartÃµes</span>
            </a>
            <a href="/configuracoes" class="nav-item">
                <span class="icon">âš™</span>
                <span class="label">Config</span>
            </a>
        </div>
    </nav>

    <!-- BotÃ£o Mobile -->
    <div class="mobile-toggle">
        <button onclick="toggleMobileView()" id="mobile-btn">ğŸ“± Ver em Mobile</button>
    </div>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
    <script>
        function toggleMobileView() {
            document.body.classList.toggle('mobile-view');
            const btn = document.getElementById('mobile-btn');
            btn.innerHTML = document.body.classList.contains('mobile-view') ? 'ğŸ’» Ver em Desktop' : 'ğŸ“± Ver em Mobile';
        }
    </script>
</body>
</html>
