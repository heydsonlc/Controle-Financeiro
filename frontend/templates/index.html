<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Controle Financeiro</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/theme-light.css') }}">
    <!-- Chart.js para gr√°ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Dashboard Financeiro</h1>
            <p class="subtitle" id="mes-atual">Carregando...</p>
        </header>

        <main>
            <!-- ========================================== -->
            <!-- BLOCO 1: RESUMO FINANCEIRO DO M√äS         -->
            <!-- ========================================== -->
            <section class="resumo-mes">
                <div class="resumo-card receitas" onclick="window.location.href='/receitas'">
                    <div class="resumo-info">
                        <h3>RECEITAS DO M√äS</h3>
                        <p class="resumo-valor" id="receitas-mes">R$ 0,00</p>
                    </div>
                </div>

                <div class="resumo-card despesas" onclick="window.location.href='/despesas'">
                    <div class="resumo-info">
                        <h3>DESPESAS DO M√äS</h3>
                        <p class="resumo-valor" id="despesas-mes">R$ 0,00</p>
                    </div>
                </div>

                <div class="resumo-card saldo-liquido">
                    <div class="resumo-info">
                        <h3>SALDO L√çQUIDO</h3>
                        <p class="resumo-valor" id="saldo-liquido">R$ 0,00</p>
                    </div>
                </div>

                <div class="resumo-card contas-bancarias" onclick="window.location.href='/contas-bancarias'">
                    <div class="resumo-info">
                        <h3>SALDO NAS CONTAS</h3>
                        <p class="resumo-valor" id="saldo-contas">R$ 0,00</p>
                    </div>
                </div>
            </section>

            <!-- ========================================== -->
            <!-- LEITURA DO M√äS                             -->
            <!-- ========================================== -->
            <section class="leitura-mes" style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px; margin: 20px 0;">
                <h2 class="section-title" style="font-size: 18px; margin-bottom: 15px;">Leitura do M√™s</h2>
                <div id="leitura-container" style="color: rgba(255,255,255,0.8); line-height: 1.6;">
                    <p class="loading">Carregando leitura...</p>
                </div>
            </section>

            <!-- ========================================== -->
            <!-- BLOCO 2: INDICADORES INTELIGENTES         -->
            <!-- ========================================== -->
            <section class="indicadores">
                <h2 class="section-title">Indicadores e Insights</h2>
                <div class="indicadores-grid" id="indicadores-container">
                    <div class="loading-indicator">Carregando indicadores...</div>
                </div>
            </section>

            <!-- ========================================== -->
            <!-- BLOCO 3: GR√ÅFICOS                         -->
            <!-- ========================================== -->
            <section class="graficos">
                <h2 class="section-title">An√°lise Visual</h2>

                <div class="graficos-grid">
                    <!-- Gr√°fico de Pizza: Despesas por Categoria -->
                    <div class="grafico-card">
                        <h3>Distribui√ß√£o por Categoria</h3>
                        <div class="grafico-wrapper">
                            <canvas id="grafico-categorias"></canvas>
                        </div>
                    </div>

                    <!-- Gr√°fico de Barras: Evolu√ß√£o de Gastos -->
                    <div class="grafico-card">
                        <h3>Evolu√ß√£o de Gastos (6 meses)</h3>
                        <div class="grafico-wrapper">
                            <canvas id="grafico-evolucao"></canvas>
                        </div>
                    </div>

                    <!-- Gr√°fico de Linha: Saldo Banc√°rio -->
                    <div class="grafico-card wide">
                        <h3>Evolu√ß√£o Projetada do Saldo (Estimativa)</h3>
                        <div class="grafico-wrapper">
                            <canvas id="grafico-saldo"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ========================================== -->
            <!-- FASE 6.1: AGENDA FINANCEIRA DO M√äS        -->
            <!-- ========================================== -->
            <section class="agenda-financeira" style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px; margin: 20px 0;">
                <h2 class="section-title" style="font-size: 18px; margin-bottom: 15px;">üìÖ Agenda Financeira do M√™s</h2>

                <!-- Insights Temporais -->
                <div id="insights-temporais" style="background: rgba(255,255,255,0.08); border-radius: 8px; padding: 15px; margin-bottom: 20px; font-size: 0.9em; color: rgba(255,255,255,0.8); line-height: 1.6;">
                    <p class="loading">Carregando insights...</p>
                </div>

                <!-- Timeline Cronol√≥gica -->
                <div id="timeline-agenda" style="font-size: 0.9em;">
                    <p class="loading">Carregando agenda...</p>
                </div>
            </section>

            <!-- ========================================== -->
            <!-- BLOCO 4: ALERTAS E AGENDA FINANCEIRA      -->
            <!-- ========================================== -->
            <section class="alertas">
                <h2 class="section-title">üîî Alertas e Agenda Financeira</h2>

                <div class="alertas-grid">
                    <!-- Contas a Vencer -->
                    <div class="alerta-card">
                        <h3>üìÖ Contas a Vencer (7 dias)</h3>
                        <div class="alerta-lista" id="contas-vencer">
                            <p class="loading">Carregando...</p>
                        </div>
                    </div>

                    <!-- Faturas de Cart√£o -->
                    <div class="alerta-card">
                        <h3>üí≥ Faturas de Cart√£o</h3>
                        <div class="alerta-lista" id="cartoes-vencer">
                            <p class="loading">Carregando...</p>
                        </div>
                    </div>

                    <!-- Financiamentos -->
                    <div class="alerta-card">
                        <h3>üè† Financiamentos Ativos</h3>
                        <div class="alerta-lista" id="financiamentos-mes">
                            <p class="loading">Carregando...</p>
                        </div>
                    </div>

                    <!-- Receitas Previstas -->
                    <div class="alerta-card">
                        <h3>üí∞ Receitas Previstas</h3>
                        <div class="alerta-lista" id="receitas-previstas">
                            <p class="loading">Carregando...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Espa√ßo para bottom navigation -->
            <div style="height: 30px;"></div>
        </main>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="bottom-nav-container">
            <a href="/" class="nav-item active">
                <span class="icon">‚åÇ</span>
                <span class="label">Dashboard</span>
            </a>
            <a href="/lancamentos" class="nav-item">
                <span class="icon">‚úé</span>
                <span class="label">Lan√ßamentos</span>
            </a>
            <a href="/despesas" class="nav-item">
                <span class="icon">‚ñ¨</span>
                <span class="label">DESPESAS</span>
            </a>
            <a href="/configuracoes" class="nav-item">
                <span class="icon">‚öô</span>
                <span class="label">Config</span>
            </a>
        </div>
    </nav>

    <!-- Bot√£o Mobile -->
    <div class="mobile-toggle">
        <button onclick="toggleMobileView()" id="mobile-btn">üì± Ver em Mobile</button>
    </div>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
    <script>
        function toggleMobileView() {
            document.body.classList.toggle('mobile-view');
            const btn = document.getElementById('mobile-btn');
            btn.innerHTML = document.body.classList.contains('mobile-view') ? 'üíª Ver em Desktop' : 'üì± Ver em Mobile';
        }
    </script>
</body>
</html>
