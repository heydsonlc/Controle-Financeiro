<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PatrimÃ´nio - Controle Financeiro</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/patrimonio.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/theme-light.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>GestÃ£o de PatrimÃ´nio (Caixinhas)</h1>
            <nav class="breadcrumb">
                <a href="/">Dashboard</a> / <a href="/configuracoes">ConfiguraÃ§Ãµes</a> / <span>PatrimÃ´nio</span>
            </nav>
        </header>

        <main>
            <!-- Tabs -->
            <div class="tabs">
                <button class="tab-button active" onclick="mostrarAba('contas')">ðŸ“¦ Caixinhas</button>
                <button class="tab-button" onclick="mostrarAba('transferencias')">ðŸ”„ TransferÃªncias</button>
            </div>

            <!-- Aba: Contas (Caixinhas) -->
            <div id="aba-contas" class="tab-content active">
                <div class="actions-bar">
                    <button class="btn btn-primary" onclick="abrirModalNovaConta()">
                        + Nova Caixinha
                    </button>
                </div>

                <!-- Resumo -->
                <div class="cards-resumo">
                    <div class="card">
                        <h3>PatrimÃ´nio Total</h3>
                        <p class="valor" id="patrimonio-total">R$ 0,00</p>
                    </div>
                    <div class="card">
                        <h3>Caixinhas Ativas</h3>
                        <p class="valor" id="total-caixinhas">0</p>
                    </div>
                </div>

                <!-- Lista de Caixinhas -->
                <div class="caixinhas-grid" id="caixinhas-lista">
                    <p class="loading">Carregando caixinhas...</p>
                </div>
            </div>

            <!-- Aba: TransferÃªncias -->
            <div id="aba-transferencias" class="tab-content">
                <div class="actions-bar">
                    <button class="btn btn-primary" onclick="abrirModalNovaTransferencia()">
                        + Nova TransferÃªncia
                    </button>
                </div>

                <!-- Lista de TransferÃªncias -->
                <div class="transferencias-lista" id="transferencias-lista">
                    <p class="loading">Carregando transferÃªncias...</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal: Nova/Editar Caixinha -->
    <div id="modal-conta" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-conta-titulo">Nova Caixinha</h2>
                <span class="close" onclick="fecharModal('modal-conta')">&times;</span>
            </div>
            <form id="form-conta" onsubmit="salvarConta(event)">
                <input type="hidden" id="conta-id">
                <div class="form-group">
                    <label for="conta-nome">Nome *</label>
                    <input type="text" id="conta-nome" required placeholder="Ex: Reserva de EmergÃªncia">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="conta-tipo">Tipo</label>
                        <select id="conta-tipo">
                            <option value="Corrente">Corrente</option>
                            <option value="PoupanÃ§a">PoupanÃ§a</option>
                            <option value="Investimento">Investimento</option>
                            <option value="Reserva">Reserva</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="conta-cor">Cor</label>
                        <input type="color" id="conta-cor" value="#28a745">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="conta-saldo-inicial">Saldo Inicial</label>
                        <input type="text" id="conta-saldo-inicial" placeholder="R$ 0,00" onkeyup="formatarMoeda(this)">
                    </div>
                    <div class="form-group">
                        <label for="conta-meta">Meta (Opcional)</label>
                        <input type="text" id="conta-meta" placeholder="R$ 0,00" onkeyup="formatarMoeda(this)">
                    </div>
                </div>
                <div class="form-group">
                    <label for="conta-obs">ObservaÃ§Ãµes</label>
                    <textarea id="conta-obs" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="fecharModal('modal-conta')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal: Nova TransferÃªncia -->
    <div id="modal-transferencia" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Nova TransferÃªncia</h2>
                <span class="close" onclick="fecharModal('modal-transferencia')">&times;</span>
            </div>
            <form id="form-transferencia" onsubmit="salvarTransferencia(event)">
                <div class="form-group">
                    <label for="transf-origem">Conta Origem *</label>
                    <select id="transf-origem" required>
                        <option value="">Selecione...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="transf-destino">Conta Destino *</label>
                    <select id="transf-destino" required>
                        <option value="">Selecione...</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="transf-valor">Valor *</label>
                        <input type="text" id="transf-valor" required placeholder="R$ 0,00" onkeyup="formatarMoeda(this)">
                    </div>
                    <div class="form-group">
                        <label for="transf-data">Data *</label>
                        <input type="date" id="transf-data" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="transf-descricao">DescriÃ§Ã£o</label>
                    <input type="text" id="transf-descricao" placeholder="Ex: Aporte mensal">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="fecharModal('modal-transferencia')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Transferir</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="bottom-nav-container">
            <a href="/" class="nav-item">
                <span class="icon">âŒ‚</span>
                <span class="label">Dashboard</span>
            </a>
            <a href="/lancamentos" class="nav-item">
                <span class="icon">âœŽ</span>
                <span class="label">LanÃ§amentos</span>
            </a>
            <a href="/despesas" class="nav-item">
                <span class="icon">â–¬</span>
                <span class="label">DESPESAS</span>
            </a>
            <a href="/cartoes" class="nav-item">
                <span class="icon">â–­</span>
                <span class="label">CartÃµes</span>
            </a>
            <a href="/configuracoes" class="nav-item">
                <span class="icon">âš™</span>
                <span class="label">Config</span>
            </a>
        </div>
    </nav>

    <!-- BotÃ£o Mobile -->
    <div class="mobile-toggle">
        <button onclick="toggleMobileView()" id="mobile-btn">ðŸ“± Ver em Mobile</button>
    </div>

    <script src="{{ url_for('static', filename='js/patrimonio.js') }}"></script>
    <script>
        function toggleMobileView() {
            document.body.classList.toggle('mobile-view');
            const btn = document.getElementById('mobile-btn');
            btn.innerHTML = document.body.classList.contains('mobile-view') ? 'ðŸ’» Ver em Desktop' : 'ðŸ“± Ver em Mobile';
        }
    </script>
</body>
</html>
